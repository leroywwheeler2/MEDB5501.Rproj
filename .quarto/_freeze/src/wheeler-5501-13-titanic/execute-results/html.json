{
  "hash": "3c648a59256e22bbc1fd53b9db8b6fc9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Analysis of Titanic dataset\"\nformat: \n  html:\n    embed-resources: true\n---\n\n\n\nThis program reads data on survival of passengers on the Titanic. Find more\ninformation in the [data dictionary][web00].\n\n[web00]: https://github.com/pmean/data/blob/main/files/titanic.yaml\n\nThis code was written by Steve Simon and Leroy Wheeler on 2024-11-13 and is placed in the public\ndomain.\n\n## Load the tidyverse library\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(broom)\nlibrary(epitools)\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n## Read the data and view a brief summary\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nti <- read_tsv(\n  file=\"../data/titanic.txt\",\n  col_names=TRUE,\n  col_types=\"ccncn\",\n  na=\"NA\")\nnames(ti) <- tolower(names(ti))\nglimpse(ti)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,313\nColumns: 5\n$ name     <chr> \"Allen, Miss Elisabeth Walton\", \"Allison, Miss Helen Loraine\"…\n$ pclass   <chr> \"1st\", \"1st\", \"1st\", \"1st\", \"1st\", \"1st\", \"1st\", \"1st\", \"1st\"…\n$ age      <dbl> 29.00, 2.00, 30.00, 25.00, 0.92, 47.00, 63.00, 39.00, 58.00, …\n$ sex      <chr> \"female\", \"female\", \"male\", \"female\", \"male\", \"male\", \"female…\n$ survived <dbl> 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1…\n```\n\n\n:::\n:::\n\n\n\n## Replace numeric codes for survived\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nti$survived <-\n\tfactor(\n\t\tti$survived,\n\t\tlevel=1:0,\n\t\tlabels=c(\"yes\", \"no\"))\n```\n:::\n\n\n\n\n## Question 1: Create a new variable, third_class that indicates whether a passenger is in third class or not.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nti$third_class <- \n  case_when(\n    ti$pclass == \"1st\" ~ \"no\",\n    ti$pclass == \"2nd\" ~ \"no\",\n    ti$pclass == \"3rd\" ~ \"yes\")\n```\n:::\n\n\n\n## Question 2: What are the probabilities of survival for third class passengers. How does this compare to the probability of survival for the other passengers.\n\n## Get counts of third class passengers by survival\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1 <-xtabs(~third_class+survived, data=ti)\ntable1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           survived\nthird_class yes  no\n        no  312 290\n        yes 138 573\n```\n\n\n:::\n:::\n\n\n## Get proportions for died/survived by third class status\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1 |>\n  proportions(\"third_class\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           survived\nthird_class       yes        no\n        no  0.5182724 0.4817276\n        yes 0.1940928 0.8059072\n```\n\n\n:::\n:::\n\n\n## Interpretation of the output for question 2.\n\nIf you were a third class passenger, you had less than a 20% chance of survival, whereas if you were a first or second class passenger, you had more than a 50% chance of survival.\n\n## Question 3: Test the hypothesis that the survival probability is different for third class passengers and the other passengers. Interpret the p-value and confidence interval.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprop.test(table1, correct=FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\t2-sample test for equality of proportions without continuity correction\n\ndata:  table1\nX-squared = 152.08, df = 1, p-value < 2.2e-16\nalternative hypothesis: two.sided\n95 percent confidence interval:\n 0.2748006 0.3735586\nsample estimates:\n   prop 1    prop 2 \n0.5182724 0.1940928 \n```\n\n\n:::\n:::\n\n\n## Interpretation of the output for question 3. \n\nThe Chi-squared statistic is much larger than the degrees of freedom and the\np-value is small. Therefore we will reject the null hypothesis and conclude that \nthere is a statistically significant difference in the mortality rates between\nthe third class passengers and the 1st/2nd class passengers.\nThe 95% confidence interval for the difference in proportions is 0.27 to 0.37.\nThis interval excludes the value of zero and indicates that the mortality rate is\nat least 27% higher and possibly as much as 37% higher for third class passengers\ncompared to the rest of the 1st/2nd class passengers.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}