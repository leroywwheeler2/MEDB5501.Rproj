{
  "hash": "7efdeca9e2a642e003adf69ad52061f0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Analysis of Titanic dataset Module 14\"\nformat: \n  html:\n    embed-resources: true\n---\n\n\n\nThis program reads data on survival of passengers on the Titanic. Find more\ninformation in the [data dictionary][dd].\n\n[dd]: https://github.com/pmean/data/blob/main/files/titanic.yaml\n\nThis code was written by Steve Simon and Leroy Wheeler on 2024-11-19 and is placed in the public\ndomain.\n\n## Load the tidyverse library\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(epitools)\nlibrary(tidyverse)\n```\n:::\n\n\n\n## Read the data and view a brief summary\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nti <- read_tsv(\n  file=\"../data/titanic.txt\",\n  col_names=TRUE,\n  col_types=\"ccncn\",\n  na=\"NA\")\nnames(ti) <- tolower(names(ti))\nglimpse(ti)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,313\nColumns: 5\n$ name     <chr> \"Allen, Miss Elisabeth Walton\", \"Allison, Miss Helen Loraine\"…\n$ pclass   <chr> \"1st\", \"1st\", \"1st\", \"1st\", \"1st\", \"1st\", \"1st\", \"1st\", \"1st\"…\n$ age      <dbl> 29.00, 2.00, 30.00, 25.00, 0.92, 47.00, 63.00, 39.00, 58.00, …\n$ sex      <chr> \"female\", \"female\", \"male\", \"female\", \"male\", \"male\", \"female…\n$ survived <dbl> 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1…\n```\n\n\n:::\n:::\n\n\n\n## Replace numeric codes for survived\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nti$survived <-\n\tfactor(\n\t\tti$survived,\n\t\tlevel=1:0,\n\t\tlabels=c(\"yes\", \"no\"))\n```\n:::\n\n\n\n## Question 1: Create a new variable, third_class that indicates whether a passenger is in third class or not. What is the odds ratio comparing survival between third class passengers and first/second class passengers? Interpret this odds ratio and the associated confidence interval.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nti$third_class <- \n  case_when(\n    ti$pclass == \"1st\" ~ \"no\",\n    ti$pclass == \"2nd\" ~ \"no\",\n    ti$pclass == \"3rd\" ~ \"yes\")\n```\n:::\n\n\n\n\n## Get counts of sex by passenger class\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1 <-xtabs(~third_class+survived, data=ti)\ntable1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           survived\nthird_class yes  no\n        no  312 290\n        yes 138 573\n```\n\n\n:::\n:::\n\n\n## Odds ratio calculation\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\noddsratio(table1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$data\n           survived\nthird_class yes  no Total\n      no    312 290   602\n      yes   138 573   711\n      Total 450 863  1313\n\n$measure\n           odds ratio with 95% C.I.\nthird_class estimate    lower    upper\n        no  1.000000       NA       NA\n        yes 4.459216 3.496075 5.711579\n\n$p.value\n           two-sided\nthird_class midp.exact fisher.exact   chi.square\n        no          NA           NA           NA\n        yes          0 3.498409e-35 6.078882e-35\n\n$correction\n[1] FALSE\n\nattr(,\"method\")\n[1] \"median-unbiased estimate & mid-p exact CI\"\n```\n\n\n:::\n:::\n\n\n\n#### Interpretation of the odd ratio output\n\nWe are 95% confident that the odds ratio of survival for 1st/2nd class passengers\nis at least 3.5 and possibly as large as 5.7, after accounting for sampling error. \nThis interval excludes the value of 1, so we conclude that the odds of \nsurvival is 4.5 times higher for 1st and 2nd class passengers than for third class passengers.\n\n## Question 2: Calculate a chi-squared test of independence that examines the association between passenger class (third versus first/second) and mortality. Interpret the test result.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm1 <- chisq.test(table1, correct=FALSE)\nm1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's Chi-squared test\n\ndata:  table1\nX-squared = 152.08, df = 1, p-value < 2.2e-16\n```\n\n\n:::\n:::\n\n\n\n#### Interpretation of the chi-square output\n\nBecause the chi-squared statistic is much larger than the degrees of freedom and the\np-value is small, we will reject the null hypothesis and conclude that passenger class status\nand survival are related (not independent)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}