{
  "hash": "2d62d1842cdd739c5ce0955b1b98b4eb",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Alternative analysis of postural sway data\"\nformat: \n  html:\n    embed-resources: true\n---\n\n\n\nThis program runs some alternatives to the two-sample t-test. Consult the [data dictionary][dic] for information about the data itself.\n\n[dic]: https://github.com/pmean/data/blob/main/files/postural-sway.yaml\n\nThis program was written by Steve Simon and Leroy Wheeler on 2024-10-16. It is placed in the public domain.\n\n\n## Libraries\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n## Read data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsway <- read_tsv(\n  file=\"../data/postural-sway.txt\",\n  col_types=\"cnn\")\nnames(sway) <- tolower(names(sway))\nglimpse(sway)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 17\nColumns: 3\n$ age      <chr> \"Elderly\", \"Elderly\", \"Elderly\", \"Elderly\", \"Elderly\", \"Elder…\n$ fbsway   <dbl> 19, 30, 20, 19, 29, 25, 21, 24, 50, 25, 21, 17, 15, 14, 14, 2…\n$ sidesway <dbl> 14, 41, 18, 11, 16, 24, 18, 21, 37, 17, 10, 16, 22, 12, 14, 1…\n```\n\n\n:::\n:::\n\n\n\n## Boxplot of side to side sway by age\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsway |>\n  ggplot(aes(age, sidesway)) +\n    geom_boxplot() +\n    ggtitle(\"Graph drawn by Leroy Wheeler on 2024-10-16\") +\n    xlab(\"Treatment group\") +\n    ylab(\"Side to side sway\") +\n    coord_flip()\n```\n\n::: {.cell-output-display}\n![](wheeler-5501-09-sway_files/figure-html/boxplot-1-1.png){width=576}\n:::\n:::\n\n\n\nThere are two outliers in the side to side sway data as well as some heterogeneity in the data.\n\n## Descriptive statistics for side to side sway by age\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsway |>\n  group_by(age) |>\n  summarize(\n    side_mn=mean(sidesway),\n    side_sd=sd(sidesway),\n    n=n())\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 4\n  age     side_mn side_sd     n\n  <chr>     <dbl>   <dbl> <int>\n1 Elderly    22.2   10.3      9\n2 Young      15.1    3.91     8\n```\n\n\n:::\n:::\n\n\n\nIn addition to the outliers, we see that the larger mean in the elderly group brings along with it a larger standard deviation that is close to three times that of the young group. We will perform a log transformation to obtain more accurate results.\n\n## Log transformation, 1\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsway |>\n  mutate(log_sidesway=log10(sidesway)) -> log_sway\n```\n:::\n\n\n\n## Log transformation, 2\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlog_sway |>\n  ggplot(aes(age, log_sidesway)) +\n    geom_boxplot() +\n    ggtitle(\"Graph drawn by Leroy Wheeler on 2024-10-16\") +\n    xlab(\"Treatment group\") +\n    ylab(\"log side to side sway\") +\n    coord_flip()\n```\n\n::: {.cell-output-display}\n![](wheeler-5501-09-sway_files/figure-html/log-transform-2-1.png){width=576}\n:::\n:::\n\n\n\nThere are no outliers after a log transformation and the distribution of the data between the two groups looks more similar.\n\n## Log transformation, 3\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlog_sway |>\n  group_by(age) |>\n  summarize(\n    log_mn=mean(log_sidesway),\n    log_sd=sd(log_sidesway),\n    n=n())\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 4\n  age     log_mn log_sd     n\n  <chr>    <dbl>  <dbl> <int>\n1 Elderly   1.31  0.187     9\n2 Young     1.17  0.112     8\n```\n\n\n:::\n:::\n\n\n\nThe standard deviations on the log scale are more similar than they were on the original scale.\n\n## Question 1: The side-to-side sway data appears to have a pair of outliers and some evidence of heterogenity. Use a log transformation to see if this makes things better. Analyze the data on a log scale using a two-sample t-test and report the confidence interval after transforming back to the original scale of measurement.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm2 <- t.test(\n  log_sidesway ~ age, \n  data=log_sway,\n  alternative=\"two.sided\",\n  var.equal=TRUE)\nm2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tTwo Sample t-test\n\ndata:  log_sidesway by age\nt = 1.8729, df = 15, p-value = 0.08071\nalternative hypothesis: true difference in means between group Elderly and group Young is not equal to 0\n95 percent confidence interval:\n -0.01966132  0.30449529\nsample estimates:\nmean in group Elderly   mean in group Young \n             1.309511              1.167094 \n```\n\n\n:::\n:::\n\n\n\nThere is a no statistically significant difference between the log side to side sway between elderly patients and young patients because the 95% confidence interval includes the possibility that the difference in the log means includes zero. This conclusion is further supported by the p value which is greater than our alpha of 0.05.\n\n## Back-transform confidence interval to the original scale.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n10^(m2$conf.int)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9557376 2.0160221\nattr(,\"conf.level\")\n[1] 0.95\n```\n\n\n:::\n:::\n\n\n\nWe are 95% confident that the geometric mean side to side sway in elderly patients is somewhere between 0.96 times higher (4% decrease) and 2.02 times higher (102% increase) than the geometric mean for young patients. Because our 95% CI includes the possibility that the elderly patient values are either smaller or larger than the younger patient values, we do not reject the null hypothesis that the side sway values in both data sets are equivalent.\n\n## Question 2: You want to replicate these findings in a new population, using the log transformation on the new data. Select a standard deviation from log transformed side-to-side sway values in the current study (go halfway between the two standard deviations). You want to have 90% power for detecting a 1.5 fold change (which is 0.176 units on a log base 10 scale). If you use a two-sided hypothesis with alpha = 0.05, what sample size would you need?\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npower.t.test(\n  n=NULL,\n  delta=0.176,\n  sd=0.14945,\n  sig.level=0.05,\n  power=0.9,\n  type=\"two.sample\",\n  alternative=\"two.sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n     Two-sample t test power calculation \n\n              n = 16.17645\n          delta = 0.176\n             sd = 0.14945\n      sig.level = 0.05\n          power = 0.9\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n```\n\n\n:::\n:::\n\n\n\nIn order to detect a 1.5 fold (0.176 units on a log scale) change in side to side sway between the two groups with a 90% power and a two sided hypothesis with an alpha =0.05, we will need a sample size of at least 17.\n\n\n",
    "supporting": [
      "wheeler-5501-09-sway_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}