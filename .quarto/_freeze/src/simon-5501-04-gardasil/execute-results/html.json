{
  "hash": "7f8c2324a0dc16a3da47ddf87911b217",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Analysis of gardasil shots by demographic factors\"\nformat: \n  html:\n    embed-resources: true\n---\n\n\nThis program reads data on Gardasil vaccinations in young women. Find more information in the [data dictionary][dd].\n\n[dd]: https://raw.githubusercontent.com/pmean/datasets/master/gardasil.yaml\n\nThe program was written by Steve Simon on 2024-09-07 and is placed in the public domain.\n\n## Load the tidyverse library\n\nFor most of your programs, you should load the tidyverse library. The messages and warnings are suppressed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n## Read the data and view a brief summary\n\nUse the read_csv function to read the data. The glimpse function will produce a brief summary. Use tolower to convert uppercase to lowercase.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngard <- read_csv(\n  file=\"../data/gardasil.csv\",\n  col_names=TRUE,\n  col_types=\"nnnnnnnnnn\")\nnames(gard) <- tolower(names(gard))\nglimpse(gard)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,413\nColumns: 10\n$ age           <dbl> 21, 21, 20, 14, 17, 11, 17, 15, 13, 18, 17, 22, 16, 13, …\n$ agegroup      <dbl> 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0,…\n$ race          <dbl> 0, 0, 0, 0, 3, 1, 0, 3, 3, 0, 1, 0, 3, 1, 1, 0, 1, 1, 0,…\n$ shots         <dbl> 3, 3, 1, 3, 2, 1, 1, 3, 3, 3, 2, 2, 1, 2, 1, 1, 1, 3, 3,…\n$ completed     <dbl> 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1,…\n$ insurancetype <dbl> 3, 3, 1, 3, 3, 0, 3, 1, 1, 2, 1, 3, 1, 3, 0, 1, 1, 1, 1,…\n$ medassist     <dbl> 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,…\n$ location      <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ locationtype  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ practicetype  <dbl> 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1,…\n```\n\n\n:::\n:::\n\n\n## Create factors for agegroup\n\nThe factor function identifies a variable as categorical and assigns labels to number codes. You don't necessarily need to use factor if the data you read in is character strings, as R automatically treats those variable as categorical.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngard$agegroup <- factor(\n  gard$agegroup,\n  levels=0:1,\n  labels=c(\n    \"11 to 17 years\",\n    \"18 to 26 years\"))\n```\n:::\n\n\n## Counts and percentages for agegroup\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngard |> \n  count(agegroup) |>\n  mutate(total=sum(n)) |>\n  mutate(pct=round(100*n/total))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 4\n  agegroup           n total   pct\n  <fct>          <int> <int> <dbl>\n1 11 to 17 years   701  1413    50\n2 18 to 26 years   712  1413    50\n```\n\n\n:::\n:::\n\n\nThere are roughly the same number of patients 11 to 17 years as there are patients 18 to 26 years.\n\n## Create factors for shots\n\nIt is a bit silly to replace 1, 2, 3 with One, Two, Three. The main reason is to clearly identify shots as categorical rather than continuous.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngard$shots <- factor(\n  gard$shots,\n  levels=1:3,\n  labels=c(\n    \"One\", \n    \"Two\", \n    \"Three\"))\n```\n:::\n\n\n## Counts and percentages for shots\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngard |> \n  count(shots) |>\n  mutate(total=sum(n)) |>\n  mutate(pct=round(100*n/total))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 4\n  shots     n total   pct\n  <fct> <int> <int> <dbl>\n1 One     440  1413    31\n2 Two     436  1413    31\n3 Three   537  1413    38\n```\n\n\n:::\n:::\n\n\nSlightly more patients got three shots than one or two shots, but this is still less than half of the patients overall.\n\n## Compare number of shots by age group\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngard |>\n  count(agegroup, shots) |>\n  group_by(agegroup) |>\n  mutate(row_total=sum(n)) |>\n  mutate(pct=round(100*n/row_total))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 5\n# Groups:   agegroup [2]\n  agegroup       shots     n row_total   pct\n  <fct>          <fct> <int>     <int> <dbl>\n1 11 to 17 years One     188       701    27\n2 11 to 17 years Two     217       701    31\n3 11 to 17 years Three   296       701    42\n4 18 to 26 years One     252       712    35\n5 18 to 26 years Two     219       712    31\n6 18 to 26 years Three   241       712    34\n```\n\n\n:::\n:::\n\n\n## Bar chart of shots by age group\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngard |>\n  ggplot(aes(x=agegroup, fill=shots)) +\n    geom_bar(position=\"fill\") +\n    xlab(\"Age group\") +\n    ylab(\"Proportion\") +\n    ggtitle(\"Plot drawn by Steve Simon on 2024-09-07\")\n```\n\n::: {.cell-output-display}\n![](simon-5501-04-gardasil_files/figure-html/shots-by-age-2-1.png){width=672}\n:::\n:::\n\n\nThe probability of getting all three shots was higher in the 11 to 17 year old group compared to the 18 to 26 year old group.\n\n",
    "supporting": [
      "simon-5501-04-gardasil_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}